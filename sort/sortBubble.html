<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
</body>
<script type="text/javascript">

  /* 归并辅助函数 */

  var mergeSortRec = function(array) {
    let length = array.length
    if(length === 1) {
      return array
    }
    let mid = Math.floor(length / 2)
    let left = array.slice(0, mid)
    let right = array.slice(mid, length)

    // console.log('mergeSortRec', array, left, right)
    return merge(mergeSortRec(left), mergeSortRec(right))
  }

  var merge = function(left, right) {
    let result = [], il = 0, ir = 0
    // console.log('mergeValid', left, right)
    while(il < left.length && ir < right.length) {
      if(left[il] < right[ir]) {
        result.push(left[il])
        il++
      } else {
        result.push(right[ir])
        ir++
      }
    }

    while(il < left.length) {
      result.push(left[il++])
    }

    while(ir < right.length) {
      result.push(right[ir++])
    }

    return result
  }


  /* 快速排序辅助函数 */

  var quick = function(array, left, right) {
    let index
    if(array.length > 1) {
      index = partition(array, left, right)

      if(left < index - 1) {
        quick(array, left, index - 1)
      }

      if(index < right) {
        quick(array, index, right)
      }
    }
  }

  var partition = function(array, left, right) {
    let i = left, j = right
    let pivot = array[ Math.floor(left + right) / 2 ]

    while(i <= j) {
      while(array[i] < pivot) {
        i++
      }
      while(array[j] > pivot) {
        j--
      }
      if(i <= j) {
        swapQuickSort(array, i, j)
        i++
        j--
      }
    }

    return i
  }

  var swapQuickSort = function(array, index1, index2) {
    let aux = array[index1];
    array[index1] = array[index2];
    array[index2] = aux;
  }

  function ArrayList() {
    let array = [];

    var swap = function(index1, index2) {
      let aux = array[index1];
      array[index1] = array[index2];
      array[index2] = aux;
    }

    this.insert = function(item) {
        array.push(item);
    }

    this.toString = function() {
      return array.join();
    }

    // 选择排序 
    this.selectionSort = function() {
      let indexMin;
      let length = array.length;
      for(let i = 0; i < length - 1; i++) {
        indexMin = i;
        for(let j = i; j < length; j++) {
          if(array[indexMin] > array[j]) {
            indexMin = j;
          }
        }
        if(i !== indexMin) {
          swap(i, indexMin);
        }
      }
    }

    // 插入排序
    this.insertionSort = function() {
      let length = array.length, j, temp
      for(let i = 1; i < length; i++) {
        j = i
        temp = array[i]
        while(j > 0 && array[j-1] > temp) {
          array[j] = array[j-1]
          j--
        }
        array[j] = temp 
      }
    }

    //归并排序
    this.mergeSort = function() {
      array = mergeSortRec(array)
    }


    //快速排序（输出有误）
    this.quickSort = function() {
      quick(array, 0, array.length - 1)
    }

    // 二分搜索算法
    this.binarySearch = function(item) {
      // 目标数组必须已排序
      this.mergeSort()

      let low = 0, high = array.length - 1, mid, element
      while(low <= high) {
        mid = Math.floor((low + high) / 2)
        element = array[mid]
        if(item > element) {
          low = mid + 1
        } else if(item < element) {
          high = mid - 1
        } else {
          return mid
        }
      }
      return -1
    }

  }

  function createSortedArray(size) {
    let array = new ArrayList();
    for(let i = size; i > 0; i--) {
        array.insert(i);
    }
    return array;
  }

  let example_ary = createSortedArray(6);


</script>
</html>
